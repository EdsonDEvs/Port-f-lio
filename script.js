// Dados para internacionalização
const languageData = {
    "pt": {
        "about": "Sobre Mim",
        "projects": "Projetos",
        "contact": "Contato",
        "header": "Desenvolvedor Full-Stack | Apaixonado por Tecnologia",
        "aboutMeContent": "Meu nome é Edson da Silva Leandro. Sou desenvolvedor com experiência em criação de aplicações web. Estou sempre em busca de novos desafios e oportunidades para aprimorar minhas habilidades. Meu foco principal é o desenvolvimento de software utilizando tecnologias como:",
        "project1": "Sistema de Gestão Empresarial para Assistência Técnica - Aplicação full-stack desenvolvida para otimizar operações de assistência técnica. Implementa arquitetura RESTful com API Node.js/Express, frontend React com hooks e context API, banco SQLite para desenvolvimento e Firebase Firestore para produção. Funcionalidades incluem: gestão completa de ordens de serviço com workflow de aprovação, sistema de tickets com SLA tracking, controle financeiro com relatórios automatizados, geração de PDFs dinâmicos com jsPDF, autenticação JWT e dashboard analítico em tempo real. Tecnologias: Node.js, Express, React, SQLite, Firebase, jsPDF, Material-UI.",
        "project2": "Plataforma de Gestão Financeira Empresarial com IA - Sistema robusto de controle financeiro desenvolvido com arquitetura de microserviços e automação inteligente. Backend em Node.js/Express com TypeScript, frontend React com Redux para gerenciamento de estado, banco PostgreSQL com otimizações de performance e Redis para cache. Implementa: categorização inteligente de transações com ML, relatórios executivos com Chart.js, sistema de aprovação de despesas, integração com APIs bancárias, notificações em tempo real via WebSocket, backup automatizado e criptografia de dados sensíveis. Automação Avançada: integração completa com n8n para workflows automatizados, assistente de IA para análise preditiva de gastos, automação de reconciliação bancária, alertas inteligentes de orçamento e relatórios automatizados por email. Tecnologias: TypeScript, React, Redux, Node.js, PostgreSQL, Redis, Chart.js, WebSocket, n8n, OpenAI API, Machine Learning.",
        "project3": "Aplicação Web Interativa de Consulta de Dados - Pokedex desenvolvida como demonstração de habilidades em consumo de APIs REST e UX/UI. Implementa React com hooks customizados, gerenciamento de estado com Context API, consumo assíncrono da PokeAPI com tratamento de erros, sistema de busca com debounce, filtros dinâmicos por múltiplos critérios, paginação otimizada, cache local com localStorage, design responsivo mobile-first e animações CSS3. Demonstra competências em: integração de APIs externas, otimização de performance, UX design, tratamento de estados de loading/error e desenvolvimento de componentes reutilizáveis. Tecnologias: React, JavaScript ES6+, CSS3, PokeAPI, LocalStorage.",
        "contactForm": {
            "name": "Nome completo:",
            "email": "Email:",
            "message": "Mensagem:",
            "button": "Enviar Mensagem",
            "success": "Mensagem enviada com sucesso!",
            "error": "Erro ao enviar mensagem. Tente novamente."
        },
        "downloadCV": "Baixar Currículo",
        "footer": "Desenvolvido por Edson da Silva Leandro",
        "navButtons": {
            "about": "Sobre_Mim",
            "projects": "Projetos", 
            "contact": "Contato"
        },
        "buttons": {
            "viewCode": "Ver Código",
            "viewDemo": "Ver Demo"
        }
    },
    "en": {
        "about": "About Me",
        "projects": "Projects",
        "contact": "Contact",
        "header": "Full-Stack Developer | Passionate about Technology",
        "aboutMeContent": "My name is Edson da Silva Leandro. I am a developer with experience in building web applications. I am always looking for new challenges and opportunities to improve my skills. My main focus is software development using technologies such as:",
        "project1": "Enterprise IT Technical Support Management System - Full-stack application developed to optimize technical support operations. Implements RESTful architecture with Node.js/Express API, React frontend with hooks and context API, SQLite database for development and Firebase Firestore for production. Features include: complete work order management with approval workflow, ticket system with SLA tracking, financial control with automated reports, dynamic PDF generation with jsPDF, JWT authentication and real-time analytical dashboard. Technologies: Node.js, Express, React, SQLite, Firebase, jsPDF, Material-UI.",
        "project2": "Enterprise Financial Management Platform with AI - Robust financial control system developed with microservices architecture and intelligent automation. Backend in Node.js/Express with TypeScript, React frontend with Redux for state management, PostgreSQL database with performance optimizations and Redis for caching. Implements: intelligent transaction categorization with ML, executive reports with Chart.js, expense approval system, banking API integration, real-time notifications via WebSocket, automated backup and sensitive data encryption. Advanced Automation: complete n8n integration for automated workflows, AI assistant for predictive spending analysis, automated bank reconciliation, intelligent budget alerts and automated email reports. Technologies: TypeScript, React, Redux, Node.js, PostgreSQL, Redis, Chart.js, WebSocket, n8n, OpenAI API, Machine Learning.",
        "project3": "Interactive Web Data Query Application - Pokedex developed as a demonstration of REST API consumption and UX/UI skills. Implements React with custom hooks, state management with Context API, asynchronous PokeAPI consumption with error handling, search system with debounce, dynamic filters by multiple criteria, optimized pagination, local cache with localStorage, mobile-first responsive design and CSS3 animations. Demonstrates competencies in: external API integration, performance optimization, UX design, loading/error state handling and reusable component development. Technologies: React, JavaScript ES6+, CSS3, PokeAPI, LocalStorage.",
        "contactForm": {
            "name": "Name:",
            "email": "Email:",
            "message": "Message:",
            "button": "Send Message",
            "success": "Message sent successfully!",
            "error": "Error sending message. Please try again."
        },
        "downloadCV": "Download CV",
        "footer": "Developed by Edson da Silva Leandro",
        "navButtons": {
            "about": "About_Me",
            "projects": "Projects",
            "contact": "Contact"
        },
        "buttons": {
            "viewCode": "View Code",
            "viewDemo": "View Demo"
        }
    },
    "es": {
        "about": "Sobre Mí",
        "projects": "Proyectos",
        "contact": "Contacto",
        "header": "Desarrollador Full-Stack | Apasionado por la tecnología",
        "aboutMeContent": "Mi nombre es Edson da Silva Leandro. Soy desarrollador con experiencia en la creación de aplicaciones web. Siempre estoy buscando nuevos desafíos y oportunidades para mejorar mis habilidades. Mi enfoque principal es el desarrollo de software utilizando tecnologías como:",
        "project1": "Sistema Empresarial de Gestión de Soporte Técnico - Aplicación full-stack desarrollada para optimizar operaciones de soporte técnico. Implementa arquitectura RESTful con API Node.js/Express, frontend React con hooks y context API, base de datos SQLite para desarrollo y Firebase Firestore para producción. Funcionalidades incluyen: gestión completa de órdenes de trabajo con flujo de aprobación, sistema de tickets con seguimiento SLA, control financiero con informes automatizados, generación dinámica de PDFs con jsPDF, autenticación JWT y dashboard analítico en tiempo real. Tecnologías: Node.js, Express, React, SQLite, Firebase, jsPDF, Material-UI.",
        "project2": "Plataforma Empresarial de Gestión Financiera con IA - Sistema robusto de control financiero desarrollado con arquitectura de microservicios y automatización inteligente. Backend en Node.js/Express con TypeScript, frontend React con Redux para gestión de estado, base de datos PostgreSQL con optimizaciones de rendimiento y Redis para caché. Implementa: categorización inteligente de transacciones con ML, informes ejecutivos con Chart.js, sistema de aprobación de gastos, integración con APIs bancarias, notificaciones en tiempo real vía WebSocket, respaldo automatizado y cifrado de datos sensibles. Automatización Avanzada: integración completa con n8n para flujos de trabajo automatizados, asistente de IA para análisis predictivo de gastos, automatización de conciliación bancaria, alertas inteligentes de presupuesto e informes automatizados por email. Tecnologías: TypeScript, React, Redux, Node.js, PostgreSQL, Redis, Chart.js, WebSocket, n8n, OpenAI API, Machine Learning.",
        "project3": "Aplicación Web Interactiva de Consulta de Datos - Pokedex desarrollada como demostración de habilidades en consumo de APIs REST y UX/UI. Implementa React con hooks personalizados, gestión de estado con Context API, consumo asíncrono de PokeAPI con manejo de errores, sistema de búsqueda con debounce, filtros dinámicos por múltiples criterios, paginación optimizada, caché local con localStorage, diseño responsivo mobile-first y animaciones CSS3. Demuestra competencias en: integración de APIs externas, optimización de rendimiento, diseño UX, manejo de estados de carga/error y desarrollo de componentes reutilizables. Tecnologías: React, JavaScript ES6+, CSS3, PokeAPI, LocalStorage.",
        "contactForm": {
            "name": "Nombre:",
            "email": "Correo Electrónico:",
            "message": "Mensaje:",
            "button": "Enviar Mensaje",
            "success": "¡Mensaje enviado con éxito!",
            "error": "Error al enviar el mensaje. Por favor, inténtalo de nuevo."
        },
        "downloadCV": "Descargar CV",
        "footer": "Desarrollado por Edson da Silva Leandro",
        "navButtons": {
            "about": "Sobre_Mí",
            "projects": "Proyectos",
            "contact": "Contacto"
        },
        "buttons": {
            "viewCode": "Ver Código",
            "viewDemo": "Ver Demo"
        }
    }
};

// Elementos DOM
const typedText = document.querySelector('#typed-text');
const aboutText = document.querySelector('#typed-about');
const currentYear = document.getElementById('current-year');
const downloadButton = document.querySelector('a[download]');
const contactForm = document.getElementById('contactForm');

// Configuração inicial
let currentLanguage = 'pt';
document.getElementById('contactForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const form = this;
    const feedback = document.createElement('div');
    feedback.id = 'formFeedback';
    form.appendChild(feedback);
    
    fetch(form.action, {
        method: 'POST',
        body: new FormData(form)
    })
    .then(response => {
        feedback.textContent = 'Mensagem enviada com sucesso!';
        feedback.classList.add('success');
        feedback.style.display = 'block';
        form.reset();
    })
    .catch(error => {
        feedback.textContent = 'Erro ao enviar. Tente novamente.';
        feedback.style.display = 'block';
    });
});
// Inicialização quando o DOM estiver pronto
document.addEventListener('DOMContentLoaded', function() {
    // Atualiza o ano no footer
    currentYear.textContent = new Date().getFullYear();
    
    // Inicia animações
    initAnimations();
    
    // Configura o formulário
    setupContactForm();
    
    // Configura rolagem suave
    setupSmoothScrolling();
    
    // Configura o seletor de idioma
    document.getElementById('language-select').addEventListener('change', changeLanguage);
    
    // Configura o idioma inicial
    changeLanguage();
    
    // Esconde o loader quando a página carregar
    handlePageLoad();
});

// Animação de digitação com cursor
function typeWithCursor(element, text, speed, callback) {
    let i = 0;
    element.textContent = '';
    const cursor = document.createElement('span');
    cursor.className = 'cursor';
    cursor.textContent = '|';
    element.appendChild(cursor);
    
    const typing = setInterval(() => {
        if (i < text.length) {
            element.insertBefore(document.createTextNode(text.charAt(i)), cursor);
            i++;
        } else {
            clearInterval(typing);
            cursor.style.display = 'none';
            if (callback) callback();
        }
    }, speed);
}

// Inicia animações
function initAnimations() {
    typeWithCursor(typedText, textToType, 150, () => {
        typeWithCursor(aboutText, languageData[currentLanguage].aboutMeContent, 50);
    });
}

// Mudança de idioma
function changeLanguage() {
    currentLanguage = document.getElementById('language-select').value;
    const langData = languageData[currentLanguage];

    // Atualiza textos estáticos
    document.querySelector('#about h2').textContent = langData.about;
    document.querySelector('#projects h2').textContent = langData.projects;
    document.querySelector('#contact h2').textContent = langData.contact;
    document.querySelector('header p .terminal-text').textContent = langData.header;
    if (downloadButton) downloadButton.textContent = langData.downloadCV;

    // Atualiza conteúdo dinâmico
    aboutText.textContent = '';
    typeWithCursor(aboutText, langData.aboutMeContent, 50);

    // Atualiza projetos
    const projectDescriptions = document.querySelectorAll('.project-item p');
    if (projectDescriptions.length >= 3) {
        projectDescriptions[0].textContent = langData.project1;
        projectDescriptions[1].textContent = langData.project2;
        projectDescriptions[2].textContent = langData.project3;
    }

    // Atualiza botões de navegação
    const navButtons = document.querySelectorAll('.digital-button');
    if (navButtons.length >= 3) {
        navButtons[0].textContent = langData.navButtons.about;
        navButtons[1].textContent = langData.navButtons.projects;
        navButtons[2].textContent = langData.navButtons.contact;
    }

    // Atualiza botões dos projetos
    const projectButtons = document.querySelectorAll('.project-links .button');
    projectButtons.forEach((button, index) => {
        if (button.textContent.includes('Código') || button.textContent.includes('Code')) {
            button.textContent = langData.buttons.viewCode;
        } else if (button.textContent.includes('Demo')) {
            button.textContent = langData.buttons.viewDemo;
        }
    });

    // Atualiza formulário
    if (contactForm) {
        document.querySelector('label[for="name"]').textContent = langData.contactForm.name;
        document.querySelector('label[for="email"]').textContent = langData.contactForm.email;
        document.querySelector('label[for="message"]').textContent = langData.contactForm.message;
        document.querySelector('#contactForm button').textContent = langData.contactForm.button;
    }

    // Atualiza footer
    document.querySelector('.copyright p').innerHTML = `&copy; ${new Date().getFullYear()} - ${langData.footer}`;
}

// Configura o formulário de contato
function setupContactForm() {
    if (!contactForm) return;
    
    // Verifica parâmetros da URL para mensagens de sucesso/erro
    const urlParams = new URLSearchParams(window.location.search);
    const success = urlParams.get('success');
    
    if (success === 'true') {
        showMessage('success', languageData[currentLanguage].contactForm.success);
    } else if (success === 'false') {
        showMessage('error', languageData[currentLanguage].contactForm.error);
    }
}

// Mostra mensagens de sucesso/erro
function showMessage(type, text) {
    const messageDiv = document.createElement('div');
    messageDiv.className = `${type}-message`;
    messageDiv.textContent = text;
    
    contactForm.insertBefore(messageDiv, contactForm.firstChild);
    
    // Remove a mensagem após 5 segundos
    setTimeout(() => {
        messageDiv.style.opacity = '0';
        setTimeout(() => {
            messageDiv.remove();
        }, 500);
    }, 5000);
}

// Configura rolagem suave
function setupSmoothScrolling() {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            
            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            
            if (targetElement) {
                targetElement.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
                
                // Atualiza a URL sem recarregar a página
                if (history.pushState) {
                    history.pushState(null, null, targetId);
                } else {
                    window.location.hash = targetId;
                }
            }
        });
    });
}

// Esconde o loader quando a página carrega
function handlePageLoad() {
    window.addEventListener('load', function() {
        setTimeout(() => {
            document.querySelector('.loading').style.opacity = '0';
            setTimeout(() => {
                document.querySelector('.loading').style.display = 'none';
            }, 500);
        }, 800);
    });
}

// Variável global para o texto a ser digitado
const textToType = "Edson da Silva Leandro";